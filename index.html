<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>南通市加强政府投资建设项目招投标领域廉政风险防控工作情况汇报</title>
    <link rel="stylesheet" media="all" href="./css/nodeppt.css">
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="./css/phone.css">
    <link rel="stylesheet" href="./js/highlight/styles/monokai_sublime.css">
    <link rel="stylesheet" href="./css/font-awesome.css">
    <link rel="stylesheet" href="./css/theme.moon.css">
    <link rel="stylesheet" href="./css/animate.css" >
    <script type="text/javascript" src="js/jQuery.min.js"></script>
    <script type="text/javascript" src="js/echarts.all.js"></script>
    <style>
        .hidden{
            visibility: hidden;
        }
    </style>
</head>
<body>
<div class="slides">
    <slides id="container">
        <slide class="slide" id="slide1" p-control="true" controlLength = "5" curtControlIndex="0" data-on-controlnext='onControlNext' data-on-controlpre='onControlPre'>
            <section class="slide-wrapper">
                <article class="flexbox vcenter">
                    <div class="p-control-1 p-control" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">666</div>
                    <div class="p-control-2 p-control" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">666</div>
                    <div class="p-control-3 p-control" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">666</div>
                    <div class="p-control-4 p-control" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">666</div>
                    <div class="p-control-5 p-control" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">666</div>
                </article>
            </section>
        </slide>
        <slide class="slide" id="slide2" >
            <section class="slide-wrapper">
                <article class="flexbox vcenter">
                    <video class="video-player" src="./assets/5.ogg" style="position: fixed;width: 1920px;height: 1080px;top: 0;left: 0;"></video>
                </article>
            </section>
        </slide>
        <slide class="slide"  data-on-leave='onLeavePage1' data-on-enter="onEnterPage1"  data-on-build="onBuild" id="slide3">
            <section class="slide-wrapper">
                <article>
                    <div class="animated" append-style="width: 80px;height: 80px;border-radius: 40px;background-color: yellow" anim="{zidx:9,name:'zoomInDownOutUp',delay:3,duration:2,fun:'ease',count:1}">diyi</div>
                    <div class="animated" append-style="width: 80px;height: 80px;border-radius: 40px;background-color: yellow" anim="{zidx:9,name:'zoomInOut',delay:3,duration:2,fun:'ease',count:1}">dier</div>
                    <div class="animated" append-style="width: 80px;height: 80px;border-radius: 40px;background-color: yellow" anim="{zidx:9,name:'zoomInOut',delay:3,duration:2,fun:'ease',count:1}">disan</div>
                </article>
            </section>
        </slide>
        <slide class="slide" data-on-leave='onLeavePage1' data-on-enter="onEnterPage1"  data-on-build="onBuild" id="slide3">
            <section class="slide-wrapper">
                <article>
                    <div>
                        <div id="img56" class="animated" style="visibility: hidden" anim="{zidx:9,name:'bounceInUp',delay:3,duration:2,fun:'ease',count:1}">
                            <img src="assets/img/img56.png">
                        </div>

                    </div>
                    <div id="text1" class="animated" style="margin-top: -100px;font-size: 30px;visibility: hidden" anim="{zidx:9,name:'bounceInUp',delay:4,duration:2,fun:'ease',count:1}">为什么选择nodePPT</div>
                    <div class="rollIn">
                        <div>123</div>
                        <div>223</div>
                        <video id="my-player3" src="./assets/5.ogg" style="width: 400px;height: 400px;top: 0;left: 0;"></video>
                    </div>
                </article>
            </section>
        </slide>
        <div class="slideTip" id="tip"></div>
    </slides>
</div>
<canvas id="drawBoard" class="draw-board" width="900" height="700"></canvas>
<div class="progress"><span id="progress"></span></div>
<div id="_buttons">
    <div class="_btn-box" id="_btn-box" style="display:none;">
        <button class="fa fa-arrow-circle-left" id="_btn-prev"></button>
        <button class="fa fa-arrow-circle-right" id="_btn-next"></button>
        <button class="fa fa-paint-brush" id="_btn-brush"></button>
        <button class="fa fa-compress" id="_btn-overview" data-toggle="fa fa-expand"></button>
    </div>
    <button class="fa fa-bars" id="_btn-bar" data-toggle="fa fa-close"></button>
</div>
<script src="./js/mixjs/lib/mix.0.3.0.min.js"></script>
<script>
    var base = location.protocol + '//' + location.host;

    var path = (location.pathname + '#').split('/').filter(function (v) {
        return !!v;
    });
    path.pop();
    path = path.join('/');
    MixJS.config({
        baseURL: [base, path, 'js'].join('/') + '/'
    });
</script>
<script src="./js/mixjs/lib/event/broadcast.js"></script>
<script src="./js/nodeppt.js"></script>
<script>
    $('[anim]').addClass('animated hidden').removeAttr("style");
    $('.p-control').addClass('animated hidden').removeAttr("style");
    function onBuild(args){
        if(args.hasOwnProperty('cItem')){
            var item = args.cItem;
            item.play &&　item.play();
        }
    }

    $('[anim]').find('*').addClass('hidden');
    $(".video-player").width(document.documentElement.clientWidth+'px');
    $(".video-player").height(document.documentElement.clientHeight+'px');

    window.onresize = function(){
        $(".video-player").width(document.documentElement.clientWidth+'px');
        $(".video-player").height(document.documentElement.clientHeight+'px');
    };

    function onControlNext(args){
        var curtSlide = args.container;
        var id = curtSlide.getAttribute('id');
        var curtControlIndex = curtSlide.getAttribute('curtControlIndex');
        var controlLength = curtSlide.getAttribute('controlLength');
        $('#'+id + ' .p-control-'+(Number(curtControlIndex)+1)).each(function(i,e){
            addAnimate({
                obj:$(e)
            },true)
            var videoArr = e.getElementsByTagName('video');
            for(var i=0;i<videoArr.length;i++){
                videoArr[i].play();
            }
            if(e.play){
                e.play();
            }
        });
        curtControlIndex =Number(curtControlIndex) + 1;
        curtSlide.setAttribute('curtControlIndex',curtControlIndex);
    }

    function onControlPre(args){
        var curtSlide = args.container;
        var id = curtSlide.getAttribute('id');
        var curtControlIndex = curtSlide.getAttribute('curtControlIndex');
        var controlLength = curtSlide.getAttribute('controlLength');
        $('#'+id + ' .p-control-'+(Number(curtControlIndex))).each(function(i,e){
            $(e).addClass('animated hidden').removeAttr("style");

            var videoArr = e.getElementsByTagName('video');
            for(var i=0;i<videoArr.length;i++){
                videoArr[i].pause();
            }
            if(e.play){
                e.pause();
            }
//            addAnimate({
//                obj:$(e)
//            },true)
        });
        curtControlIndex =Number(curtControlIndex) - 1;
        curtSlide.setAttribute('curtControlIndex',curtControlIndex);
    }

    function onLeaveSlide(args){
        if(args.container.getAttribute('p-control')){
            args.container.setAttribute('curtControlIndex',0);
        }
        var id = args.container.getAttribute('id');
        $('#'+id).find('[anim]').addClass('animated hidden').removeAttr("style");
//        console.log(args);
//        $('[anim]').addClass('animated hidden').removeAttr("style");
    }
    function onEnterSlide(args){
        $('slide.current').find('[anim]').each(function(i,e){
            addAnimate({
                obj:$(e)
            });
        })
    }

    function addAnimate (params,pControl=false){
        var $obj = params.obj,
            po = eval('('+$obj.attr('anim')+')'),
            zidx = po.zidx,                         //z-index
            name = po.name,                         //animation-name
            delay = po.delay,                       //animation-delay
            duration = po.duration,                 //animation-duration
            fun = po.fun?po.fun:'linear',           //animation-timing-function
            count = po.count?po.count:1,            //animation-iteration-count
            fill = po.fill?po.fill:'';              //fill-mode
        //取出原先style
        var _styles = $obj.attr("append-style");
        if(_styles){
            _styles = $obj.clone().attr("append-style");
        }else{
            _styles = '';
        }
        if(($obj.attr('stop') && $obj.attr('stop')=="false") || (typeof $obj.attr('stop') == 'undefined')){
            $obj.removeAttr("style").removeClass('animated');
            //重新动画
            $obj.stop(true,false).addClass('animated').attr('style',
                'visibility:visible;animation-name:'+name+';-webkit-animation-name:'+name
                +';animation-delay:'+delay+';-webkit-animation-delay:'+delay
                +'s;animation-duration:'+duration+'s;-webkit-animation-duration:'+duration+'s;z-index:'+zidx
                +';animation-timing-function:'+fun+';-webkit-animation-timing-function:'+fun
                +';animation-iteration-count:'+count+';-webkit-animation-iteration-count:'+count
                +';animation-fill-mode:'+fill+';-webkit-animation-fill-mode:'+fill+';'+_styles);
            $obj.removeClass('hidden');
            $obj.find('*').removeClass('hidden');
        }else{
            $obj.stop(true,false).attr("stop",false);
        }
    }
    Slide.init({
        containerID: 'container',
        drawBoardID: 'drawBoard',
        slideClass: '.slide',
        buildClass: '.build',
        progressID: 'progress',
        transition: 'slide3',
        width: 1100,
        dir: './',
        control: {
            type: 'postMessage',
            args: {
                isControl: false
            }
        },
        tipID: 'tip'
    });
</script>
<script src="js/test.js"></script>
</body>
</html>
